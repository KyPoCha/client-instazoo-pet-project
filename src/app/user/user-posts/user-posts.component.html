<div *ngIf="isUserPostsLoaded" xmlns="http://www.w3.org/1999/html">
  <div style="">
    <button mat-flat-button color="primary" routerLink="/profile/add">Add post</button>
  </div>

  <h2>{{posts.length}}</h2>

  <mat-card class="post-card" *ngFor="let post of posts; let i = index">
    <mat-card-header style="text-align: left; margin-left: -4rem">
      <div mat-card-avatar class="example-header-image"></div>
      <mat-card-title>{{post.title}}</mat-card-title>
      <mat-card-subtitle style="margin-left: 0.5rem">{{post.location}}</mat-card-subtitle>
    </mat-card-header>
    <img mat-card-image [src]="formatImage(post.image)" alt="post image">
    <mat-card-content style="padding: 1rem">
      <p>
        {{post.caption}}
      </p>
    </mat-card-content>

    <div style="text-align: left; margin-left: 1rem">
      <p *ngFor="let comment of post.comments; let c = index"><span style="font-weight: 500">{{comment.username}}</span>: {{comment.message}}
        <button color="accent" mat-button (click)="deleteComment(comment.id, i, c)">
          <mat-icon color="accent">clear</mat-icon>
        </button>
      </p>
    </div>

    <div style="display: flex">
      <div style="margin-left: -0.3rem; margin-bottom: 2rem">
        <mat-card-actions align="end">
          <button class="remove-button" color="warn" mat-button (click)="removePost(post,i)">
            <mat-icon color="warn">delete</mat-icon>
            Remove Post
          </button>
        </mat-card-actions>
      </div>
      <mat-card-subtitle style="margin-left: -7.5rem" align="start">Likes: {{post.likes}} <span *ngIf="post.likes > 0">by {{post.usersLiked}}</span></mat-card-subtitle>
    </div>
  </mat-card>
</div>
